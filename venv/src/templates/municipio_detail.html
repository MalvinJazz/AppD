{% extends 'base.html' %}

{% block title %}
{{municipio.nombre}}
{% endblock %}

{% block head %}
  <h1>{{municipio.nombre}}, {{municipio.departamento}}</h1>
{% endblock %}

{% block content %}
<div id="section">
  <div id="chart"></div>
</div>
{% endblock %}

{% block js %}
<script type='text/javascript' src='https://www.gstatic.com/charts/loader.js'></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">

google.charts.load('visualization', '1', {'packages': ['corechart']});
google.charts.setOnLoadCallback(draw);

function draw() {
        // Some raw data (not necessarily accurate)
        var data = google.visualization.arrayToDataTable([
          ["Zona", "Denuncias"],
          {% for dato in dirs %}
            ['{{dato.direccion}}',{{dato.sumDenuncias}}],
          {% endfor %}
        ]);

    var options = {
      title : 'Denuncias del Municipio',
      hAxis: {title: 'Denuncias'},
      vAxis: {title: 'Zona'},
      bar: {groupWidth: "75%"},
      legend: { position: "none" },
      animation:{
          duration: 1500,
          easing: 'out',
          startup: true,
      },
    };

    var chart = new google.visualization.BarChart(document.getElementById('chart'));
    chart.draw(data, options);
  }

</script>
{% endblock %}
